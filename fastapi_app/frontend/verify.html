<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Verificaci√≥n de cuenta</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <h2>üì® Verificando tu cuenta...</h2>
    <p id="msg">Por favor esper√° un momento...</p>
  </div>

  <script>
    async function verifyEmail() {
      const params = new URLSearchParams(window.location.search);
      const token = params.get("token");
      const msg = document.getElementById("msg");

      if (!token) {
        msg.textContent = "‚ùå Token no encontrado. Verific√° tu enlace.";
        return;
      }

      try {
        const res = await fetch(`/api/verify-email?token=${token}`);
        const data = await res.json();
        if (res.ok) {
          msg.innerHTML = `‚úÖ ${data.detail || "Cuenta verificada con √©xito"}<br><br>
          <button onclick="location.href='index.html'">Ir al inicio</button>`;
        } else {
          msg.textContent = `‚ùå ${data.detail || "Error al verificar el correo"}`;
        }
      } catch (err) {
        msg.textContent = "‚ùå Error de conexi√≥n con el servidor.";
      }
    }

    verifyEmail();
  </script>
</body>
</html>
